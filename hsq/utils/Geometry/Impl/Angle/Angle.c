/**
 ******************************************************************************
 * @file      Angle.c
 *
 * @brief     Implementation of IAngle.h
 ******************************************************************************
 */

/*
-------------------------------------------------------------------------------
	Include files
-------------------------------------------------------------------------------
*/

#include <math.h>
#include "IAngle.h"
#include "RoboticUtils.h"

/*
 ------------------------------------------------------------------------------
    Local definitions
 ------------------------------------------------------------------------------
 */


/*
 ------------------------------------------------------------------------------
    Local types
 ------------------------------------------------------------------------------
 */


/*
 ------------------------------------------------------------------------------
    Private data
 ------------------------------------------------------------------------------
 */


/*
-------------------------------------------------------------------------------
    Private function prototypes
-------------------------------------------------------------------------------
*/


/*
-------------------------------------------------------------------------------
    Implementation of interface functions
-------------------------------------------------------------------------------
*/

/*
 ******************************************************************************
 * Function
 ******************************************************************************
 */
tAngle IAngle_Normalize( tAngle angle )
{
    tAngle normalized = angle % IANGLE_FULL_ROTATION;
    if ( normalized <= -IANGLE_HALF_ROTATION )
    {
        normalized += IANGLE_FULL_ROTATION;
    }
    else if ( normalized > IANGLE_HALF_ROTATION )
    {
        normalized -= IANGLE_FULL_ROTATION;
    }
    return normalized;
}

/*
 ******************************************************************************
 * Function
 ******************************************************************************
 */
double IAngle_NormalizeRad( double rad )
{
    double normalized = fmod( rad, 2 * PI );
    if ( normalized <= -PI )
    {
        normalized += 2 * PI;
    }
    else if ( normalized > PI )
    {
        normalized -= 2 * PI;
    }
    return normalized;
}

/*
 ******************************************************************************
 * Function
 ******************************************************************************
 */
tAngle IAngle_RadToDeg( double rad )
{
    return IAngle_Normalize( DoubleToS32( rad * ( (double)IANGLE_HALF_ROTATION / PI ) ) );
}

/*
 ******************************************************************************
 * Function
 ******************************************************************************
 */
double IAngle_DegToRad( tAngle angle )
{
    return S32ToDouble( IAngle_Normalize( angle ) ) * ( PI / (double)IANGLE_HALF_ROTATION );
}

/*
-------------------------------------------------------------------------------
    Implementation of private functions
-------------------------------------------------------------------------------
*/
